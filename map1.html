<!DOCTYPE html>
<html lang="EN">
	<head>
		<meta charset="UTF-8">
		<meta name="description" content="Terra forest bathing">
		<meta name="author" content="Kieran Torpey">
		<meta name="viewport" content="width=device-width, initial-scale=1">


		<title>Sign in</title>
		<link type="text/css" rel="stylesheet" href="css/reset.css" />
		<link type="text/css" rel="stylesheet" href="css/master.css" />
		<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">

		<link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@400;500&display=swap" rel="stylesheet">
		<link href="https://www.fontify.me/wf/254d651a68fa31c4777a019dc9d73f44" rel="stylesheet" type="text/css">
		<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<style>


</style>


</head>
<body>
	<header>
		<p><span id="datetime"></span></p>
	</header>



<div id="map"></div>
<!-- Replace the value of the key parameter with your own API key. -->
<script src="js/big.js" ></script>
<script>
var map, infoWindow;

var request;
var service;
var markers = [];

function initMap() {
	let location = new Object();
	navigator.geolocation.getCurrentPosition(function(pos){
		location.lat = pos.coords.latitude;
		location.long = pos.coords.longitude;
    map = new google.maps.Map(document.getElementById("map"), {
	 center: {lat: location.lat, lng: location.long},
	 zoom: 15
 });
 getRestaurants(location);
});

}

function getRestaurants(location) {
 	var pyrmont = new google.maps.LatLng(location.lat, location.long);
	var request = {
		location: pyrmont,
		radius: '8000',
		type: ['restaurant']
	};

	service = new google.maps.places.PlacesService(map);
	service.nearbySearch(request, callback);
}


function callback(results, status) {
		if(status == google.maps.places.PlacesServiceStatus.OK) {
				for (var i = 0; i < results.length; i++) {
					 var place = results[i];
							let price = createPrice(place.price_level);
							let content = `<h3>${place.name}</h3>
							<h4>${place.vicinity}</h4>
							<p>Price:${price}<br/>
							Rating: ${place.rating}`;

					 var marker = new google.maps.Marker({
						 position: place.geometry.location,
						 map: map,
						 title: place.name
					 });

					 var infowindow = new google.maps.InfoWindow({
						 content: content
					 });

					 bindInfoWindow(marker, map, infowindow, content);
					 marker.setMap(map);
				}
		}

}

function bindInfoWindow(marker, map, infowindow, html) {
	marker.addListener('click', function() {
		infowindow.setContent(html);
		infowindow.open(map, this);
	});
}

</script>
<script async defer

src="https://maps.googleapis.com/maps/api/js?libraries=places&key=AIzaSyCpHK_L3crjNHbzd-gv4u4Gh09NGCwwrwo&callback=initMap">
</script>


</body>
</html>
